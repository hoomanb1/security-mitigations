<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_144) on Wed Sep 27 11:27:13 AEST 2017 -->
<title>GlobalFileUploadFilter</title>
<meta name="date" content="2017-09-27">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="GlobalFileUploadFilter";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":9,"i1":9,"i2":10,"i3":9,"i4":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../com/github/hoomanb1/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.MagicNumberFileFilter.html" title="class in com.github.hoomanb1"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/github/hoomanb1/GlobalFileUploadFilter.html" target="_top">Frames</a></li>
<li><a href="GlobalFileUploadFilter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.github.hoomanb1</div>
<h2 title="Class GlobalFileUploadFilter" class="title">Class GlobalFileUploadFilter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.github.hoomanb1.GlobalFileUploadFilter</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">GlobalFileUploadFilter</span>
extends java.lang.Object</pre>
<div class="block"><p>A GlobalFileUploadFilter configures a filter to have a fine-grained
 control over file type upload.</p>

 <p>If this is configured via a system property with file.upload.filter
 property key, an instance of this class will contain filters list as
 MagicNumberFileFilter object. Callers can access these filters via
 getFilterConfig() method. The filter list can then be passed into
 <code>accept(byte[] fileContent, List&lt;MagicNumberFileFilter&gt; filters)</code>
 along with file content bytes that need to be checked against these
 filters. When <code>accept()</code> method is called, file magic number (Signature),
 byte offset, file size, and any exception with regards to that file
 content will be evaluated against the already configured filter.</p>

 <p>In addition to global filter configuration, filter can also be configured
 on a use-case basis. If the application's file upload requirement is not the
 same throughout the application, then this filter can also be configured
 programmatically by calling <code>constructFilters(String config, List&lt;MagicNumberFileFilter&gt; filters)</code>
 and providing the String pattern syntax for the filter configuration as well as an empty list
 of the MagicNumberFileFilter type. The String config will be parsed and a list of filters
 will be returned to the caller and eventually that list can be passed into <code>accept()</code></p>

 <p>For example to configure the filter to only allow a Zip file upload which contains ascii documents
 with specific characters the filter configuration looks like below:</p>
 <br>
     <pre>
         byte[] fileContentToCheck = ...;
         List&lt;MagicNumberFileFilter&gt; filters = GlobalFileUploadFilter.constructFilters(
                "signature=504B0304,offset=0,maxSize=25mb,exc=[@ ? %]", new ArrayList&lt;MagicNumberFileFilter&gt;());
         boolean isFileAllowed = GlobalFileUploadFilter.accept(fileContentToCheck, filters);
     </pre>



 <p>Filter pattern syntax definition:</p>
 <br>
 Signature: File magic number
 <br>
 offset: From which magic number starts
 <br>
 maxSize: max file size allowed
 <br>
 exc: List of space-separated characters allowed for Ascii files
<br>
 Multiple filter patterns are separated via a dash "-".</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Hooman Broujerdi</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.MagicNumberFileFilter.html" title="class in com.github.hoomanb1">GlobalFileUploadFilter.MagicNumberFileFilter</a></span></code>
<div class="block">Hold a snapshot of values to be passed to an GlobalFileUploadFilter.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.html#ALLOWED_NUMBER_OF_UPLOADS">ALLOWED_NUMBER_OF_UPLOADS</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.html#GlobalFileUploadFilter--">GlobalFileUploadFilter</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.html#accept-byte:A-java.util.List-">accept</a></span>(byte[]&nbsp;fileContent,
      java.util.List&lt;<a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.MagicNumberFileFilter.html" title="class in com.github.hoomanb1">GlobalFileUploadFilter.MagicNumberFileFilter</a>&gt;&nbsp;filters)</code>
<div class="block">Reads file content as byte array and checks the
 magic number associated with the file type</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static java.util.List&lt;<a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.MagicNumberFileFilter.html" title="class in com.github.hoomanb1">GlobalFileUploadFilter.MagicNumberFileFilter</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.html#constructFilters-java.lang.String-java.util.List-">constructFilters</a></span>(java.lang.String&nbsp;config,
                java.util.List&lt;<a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.MagicNumberFileFilter.html" title="class in com.github.hoomanb1">GlobalFileUploadFilter.MagicNumberFileFilter</a>&gt;&nbsp;filters)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.util.List&lt;<a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.MagicNumberFileFilter.html" title="class in com.github.hoomanb1">GlobalFileUploadFilter.MagicNumberFileFilter</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.html#getFilterConfig--">getFilterConfig</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.html#getMaxFileSizeAllowed-java.util.List-">getMaxFileSizeAllowed</a></span>(java.util.List&lt;<a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.MagicNumberFileFilter.html" title="class in com.github.hoomanb1">GlobalFileUploadFilter.MagicNumberFileFilter</a>&gt;&nbsp;filters)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>static <a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.html" title="class in com.github.hoomanb1">GlobalFileUploadFilter</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.html#newFileUploadFilter--">newFileUploadFilter</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="ALLOWED_NUMBER_OF_UPLOADS">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ALLOWED_NUMBER_OF_UPLOADS</h4>
<pre>public static final&nbsp;int ALLOWED_NUMBER_OF_UPLOADS</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.github.hoomanb1.GlobalFileUploadFilter.ALLOWED_NUMBER_OF_UPLOADS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="GlobalFileUploadFilter--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>GlobalFileUploadFilter</h4>
<pre>public&nbsp;GlobalFileUploadFilter()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getFilterConfig--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFilterConfig</h4>
<pre>public&nbsp;java.util.List&lt;<a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.MagicNumberFileFilter.html" title="class in com.github.hoomanb1">GlobalFileUploadFilter.MagicNumberFileFilter</a>&gt;&nbsp;getFilterConfig()</pre>
</li>
</ul>
<a name="constructFilters-java.lang.String-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>constructFilters</h4>
<pre>public static&nbsp;java.util.List&lt;<a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.MagicNumberFileFilter.html" title="class in com.github.hoomanb1">GlobalFileUploadFilter.MagicNumberFileFilter</a>&gt;&nbsp;constructFilters(java.lang.String&nbsp;config,
                                                                                            java.util.List&lt;<a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.MagicNumberFileFilter.html" title="class in com.github.hoomanb1">GlobalFileUploadFilter.MagicNumberFileFilter</a>&gt;&nbsp;filters)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>config</code> - configuration pattern syntax</dd>
<dd><code>filters</code> - an empty list of filters to be populated</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a list of filters based on config param</dd>
</dl>
</li>
</ul>
<a name="accept-byte:A-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>accept</h4>
<pre>public static&nbsp;boolean&nbsp;accept(byte[]&nbsp;fileContent,
                             java.util.List&lt;<a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.MagicNumberFileFilter.html" title="class in com.github.hoomanb1">GlobalFileUploadFilter.MagicNumberFileFilter</a>&gt;&nbsp;filters)</pre>
<div class="block">Reads file content as byte array and checks the
 magic number associated with the file type</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>fileContent</code> - file content to be checked</dd>
<dd><code>filters</code> - List of filters to be checked against file content</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>whether file content matches filter's condition</dd>
</dl>
</li>
</ul>
<a name="getMaxFileSizeAllowed-java.util.List-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxFileSizeAllowed</h4>
<pre>public static&nbsp;long&nbsp;getMaxFileSizeAllowed(java.util.List&lt;<a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.MagicNumberFileFilter.html" title="class in com.github.hoomanb1">GlobalFileUploadFilter.MagicNumberFileFilter</a>&gt;&nbsp;filters)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>filters</code> - list of filters</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>max file size based on configs</dd>
</dl>
</li>
</ul>
<a name="newFileUploadFilter--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>newFileUploadFilter</h4>
<pre>public static&nbsp;<a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.html" title="class in com.github.hoomanb1">GlobalFileUploadFilter</a>&nbsp;newFileUploadFilter()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an instance of GlobalFileUploadFilter with configured system property configured filters</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../com/github/hoomanb1/package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../com/github/hoomanb1/GlobalFileUploadFilter.MagicNumberFileFilter.html" title="class in com.github.hoomanb1"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/github/hoomanb1/GlobalFileUploadFilter.html" target="_top">Frames</a></li>
<li><a href="GlobalFileUploadFilter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
